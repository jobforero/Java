package servicio;

import modelo.*;
import java.util.ArrayList;

/**
 * GestorProductos
 * Maneja el catÃ¡logo de productos disponibles en el restaurante
 */

public class GestorProductos {
    
    private ArrayList<Producto> catalogo;
    
    /**
     * CONSTRUCTOR
     * Inicializa el catÃ¡logo con algunos productos de ejemplo
     */
    public GestorProductos() {
        this.catalogo = new ArrayList<>();
        cargarProductosIniciales();
    }
    
    /**
     * Carga productos de ejemplo al iniciar
     */
    private void cargarProductosIniciales() {
        // Comidas
        catalogo.add(new Comida("Arroz con Pollo", 8.50, "Plato Fuerte", false));
        catalogo.add(new Comida("Ceviche", 12.00, "Entrada", true));
        catalogo.add(new Comida("Sancocho", 9.00, "Plato Fuerte", false));
        catalogo.add(new Comida("Patacones", 5.50, "Entrada", false));
        catalogo.add(new Comida("Ropa Vieja", 10.00, "Plato Fuerte", true));
        
        // Bebidas
        catalogo.add(new Bebida("Coca Cola", 2.00, "Mediana", false));
        catalogo.add(new Bebida("Jugo Natural", 3.50, "Grande", false));
        catalogo.add(new Bebida("Cerveza Atlas", 3.00, "Mediana", true));
        catalogo.add(new Bebida("Agua", 1.50, "PequeÃ±a", false));
        catalogo.add(new Bebida("Chicha", 2.50, "Mediana", false));
        
        System.out.println("â CatÃ¡logo cargado con " + catalogo.size() + " productos");
    }
    
    /**
     * Agregar un nuevo producto al catÃ¡logo
     */
    public void agregarProducto(Producto producto) {
        // VALIDACIÃN: Producto no puede ser null
        if (producto == null) {
            System.out.println("Error: Producto invÃ¡lido");
            return;
        }
        
        catalogo.add(producto);
        System.out.println("â Producto agregado al catÃ¡logo: " + producto.getNombre());
    }
    
    /**
     * Mostrar todos los productos del catÃ¡logo
     * FOR: Recorre la lista de productos
     */
    public void mostrarCatalogo() {
        System.out.println("\nââââââââââââââââââââââââââââââââââââââââââââââââââ");
        System.out.println("â          ð CATÃLOGO DE PRODUCTOS              â");
        System.out.println("ââââââââââââââââââââââââââââââââââââââââââââââââââ\n");
        
        // VALIDACIÃN: Si el catÃ¡logo estÃ¡ vacÃ­o
        if (catalogo.isEmpty()) {
            System.out.println("â  No hay productos en el catÃ¡logo");
            return;
        }
        
        // Separar por tipo
        System.out.println("ð½ï¸  COMIDAS:");
        System.out.println("ââââââââââââââââââââââââââââââââââââââââââââââââ");
        int index = 0;
        for (Producto p : catalogo) {
            if (p instanceof Comida) {
                System.out.printf("[%d] %-35s $%.2f\n", 
                                index, 
                                p.toString(), 
                                p.calcularPrecio());
            }
            index++;
        }
        
        System.out.println("\nð¥¤ BEBIDAS:");
        System.out.println("ââââââââââââââââââââââââââââââââââââââââââââââââ");
        index = 0;
        for (Producto p : catalogo) {
            if (p instanceof Bebida) {
                System.out.printf("[%d] %-35s $%.2f\n", 
                                index, 
                                p.toString(), 
                                p.calcularPrecio());
            }
            index++;
        }
        
        System.out.println("\nð COMBOS:");
        System.out.println("ââââââââââââââââââââââââââââââââââââââââââââââââ");
        index = 0;
        for (Producto p : catalogo) {
            if (p instanceof Combo) {
                System.out.printf("[%d] %s\n", index, p.toString());
            }
            index++;
        }
        
        System.out.println("ââââââââââââââââââââââââââââââââââââââââââââââââ\n");
    }
    
    /**
     * Buscar producto por Ã­ndice
     */
    public Producto obtenerProducto(int indice) {
        // VALIDACIÃN: Verificar que el Ã­ndice sea vÃ¡lido
        if (indice >= 0 && indice < catalogo.size()) {
            return catalogo.get(indice);
        } else {
            System.out.println("Error: Ãndice invÃ¡lido");
            return null;
        }
    }
    
    /**
     * Obtener el tamaÃ±o del catÃ¡logo
     */
    public int cantidadProductos() {
        return catalogo.size();
    }
    
    /**
     * Verificar si hay productos disponibles
     */
    public boolean tieneProductos() {
        return !catalogo.isEmpty();
    }
    
    /**
     * Crear un combo personalizado
     */
    public Combo crearCombo(String nombreCombo, double descuento) {
        // VALIDACIÃN: Nombre no vacÃ­o y descuento vÃ¡lido
        if (nombreCombo == null || nombreCombo.trim().isEmpty()) {
            System.out.println("Error: El nombre del combo no puede estar vacÃ­o");
            return null;
        }
        
        if (descuento < 0 || descuento > 1) {
            System.out.println("Error: El descuento debe estar entre 0 y 1");
            return null;
        }
        
        Combo nuevoCombo = new Combo(nombreCombo, descuento);
        agregarProducto(nuevoCombo);
        return nuevoCombo;
    }
    
    public ArrayList<Producto> getCatalogo() {
        return catalogo;
    }
}